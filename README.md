### Описание

Этот проект включает два основных модуля: **Container** и **Network**. Модуль **Container** отвечает за развертывание нескольких экземпляров веб-сервера Nginx, а модуль **Network** создает сеть Docker для обеспечения связи между этими контейнерами.

## Модули

### 1. Модуль Container

Модуль **Container** создает несколько контейнеров Nginx на основе заданной конфигурации. Он позволяет динамически масштабировать количество контейнеров с помощью параметра `count`.

#### Конфигурация

- **Count**: Количество создаваемых экземпляров контейнера (по умолчанию 10).
- **Source**: Путь к исходным файлам контейнера Docker.
- **Параметры контейнера**:
  - **Name**: Каждый контейнер получает имя в формате `nginx-{index}`, где `{index}` — это индекс экземпляра.
  - **Image**: Используемый образ Docker для контейнера (`nginx:latest`).
  - **Ports**:
    - Внешний порт начинается с `8080` и увеличивается на индекс экземпляра.
    - Внутренний порт установлен на `80`, а также добавляется внешний порт `777` с внутренним `777`.
  - **Сетевые настройки**:
    - Каждый контейнер подключается к сети с именем "my-network".
    - Каждому контейнеру назначается уникальный IP-адрес на основе его индекса.

#### Пример конфигурации

```hcl
module "container" {
    count = 10
    source = "./docker_container"
    container = {
        name = "nginx-${count.index}"
        image = "nginx:latest"
        ports = [
            {
                external = 8080 + count.index
                internal = 80
            },
            {
                external = 777 + count.index
                internal = 777
            }
        ]
        network = [
            {
                name = "my-network"
                ip_address = "10.20.0.1${count.index}"
            }
        ]
    }
}
```

### 2. Модуль Network

Модуль **Network** создает сеть Docker, которая позволяет контейнерам взаимодействовать друг с другом.

#### Конфигурация

- **Source**: Путь к исходным файлам сети Docker.
- **Параметры сети**:
  - **Name**: Имя сети (по умолчанию "my-network").
  - **Subnet**: Подсеть, назначенная сети (по умолчанию `10.20.0.0/24`).

#### Пример конфигурации

```hcl
module "network" {
    source = "./docker_network"
    network = {
        name = "my-network"
        subnet = "10.20.0.0/24"
    }
}
```

## Использование

1. Клонируйте этот репозиторий.
2. Перейдите в директорию, содержащую ваши файлы конфигурации Terraform.
3. Инициализируйте Terraform с помощью команды `terraform init`.
4. Примените конфигурацию с помощью команды `terraform apply`.

## Требования

- Установленный Terraform на вашем компьютере.
- Установленный и запущенный Docker.

## Заключение

Данный проект позволяет легко развернуть несколько экземпляров Nginx в Docker-контейнерах с использованием Terraform, обеспечивая при этом их взаимодействие через созданную сеть.

Citations:
[1] https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/9137652/c3ae6af1-1019-4b0f-8066-d669357be031/paste.txt
